<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ALEX 3.0 - SAT Guatemala</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body class="dashboard-body">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <span class="logo-badge">A</span>
      <div class="sidebar-logo-text">
        <span class="sidebar-logo-main">ALEX 3.0</span>
        <span class="sidebar-logo-sub">Panel del negocio</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a href="dashboard.html" class="sidebar-link">ğŸ“Š Dashboard</a>
      <a href="ventas.html" class="sidebar-link">ğŸ’µ Ventas</a>
      <a href="inventario.html" class="sidebar-link">ğŸ“¦ Inventario</a>
      <a href="caja.html" class="sidebar-link">ğŸ’° Caja</a>
      <a href="compras.html" class="sidebar-link">ğŸ§¾ Compras</a>
      <a href="gastos.html" class="sidebar-link">ğŸ“‰ Gastos</a>
      <a href="clientes.html" class="sidebar-link">ğŸ‘¥ Clientes</a>
      <a href="proveedores.html" class="sidebar-link">ğŸšš Proveedores</a>
      <a href="contabilidad.html" class="sidebar-link">ğŸ“š Contabilidad</a>
      <a href="sat.html" class="sidebar-link active">ğŸ‡¬ğŸ‡¹ SAT Guatemala</a>
      <a href="ia.html" class="sidebar-link">ğŸ¤– IA empresarial</a>
      <a href="configuracion.html" class="sidebar-link">âš™ï¸ ConfiguraciÃ³n</a>
    </nav>

    <div class="sidebar-footer">
      <span class="sidebar-footer-title">Empresa demo</span>
      <span class="sidebar-footer-sub">VersiÃ³n 1.0</span>
    </div>
  </aside>

  <!-- Layout -->
  <div class="main-layout">
    <!-- Topbar -->
    <header class="topbar">
      <button class="btn-menu-mobile" id="btnMenuMobile">â˜°</button>

      <div class="topbar-left">
        <h1 class="topbar-title">SAT Guatemala</h1>
        <p class="topbar-subtitle">InformaciÃ³n, regÃ­menes y futuras integraciones DTE.</p>
      </div>

      <div class="topbar-right">
        <span class="topbar-company">Mi tienda demo</span>
        <span class="topbar-divider">â€¢</span>
        <span class="topbar-user" id="topbar-user-label">Usuario</span>
        <button class="btn" id="btnLogout" style="margin-left: 0.75rem;">Cerrar sesiÃ³n</button>
      </div>
    </header>

    <!-- Contenido principal -->
    <main class="main-content">
      
      <!-- SecciÃ³n regÃ­menes -->
      <section class="cards-grid">
        <article class="card">
          <h2 class="card-title">PequeÃ±o Contribuyente</h2>
          <p class="card-description">
            Ideal para negocios con ingresos hasta <strong>Q150,000 al aÃ±o</strong>.
          </p>
          <ul class="alerts-list">
            <li class="alert-item">â¡ï¸ Impuesto del <strong>5%</strong> mensual sobre ventas.</li>
            <li class="alert-item">â¡ï¸ No requiere contabilidad avanzada.</li>
            <li class="alert-item">â¡ï¸ Puede emitir <strong>Factura ElectrÃ³nica</strong> (FEL).</li>
            <li class="alert-item">â¡ï¸ No maneja crÃ©dito fiscal.</li>
          </ul>
        </article>

        <article class="card">
          <h2 class="card-title">RÃ©gimen General</h2>
          <p class="card-description">
            Para negocios mÃ¡s grandes o con facturaciÃ³n completa.
          </p>
          <ul class="alerts-list">
            <li class="alert-item">â¡ï¸ Pago de IVA (12%).</li>
            <li class="alert-item">â¡ï¸ DeclaraciÃ³n mensual o trimestral.</li>
            <li class="alert-item">â¡ï¸ Manejo de costos, crÃ©dito fiscal y compras.</li>
            <li class="alert-item">â¡ï¸ Requiere contabilidad profesional.</li>
          </ul>
        </article>

        <article class="card">
          <h2 class="card-title">Â¿CuÃ¡l me conviene?</h2>
          <p class="card-description">
            ALEX analizarÃ¡ tus ventas y te recomendarÃ¡ automÃ¡ticamente el mejor rÃ©gimen.
          </p>
          <ul class="alerts-list">
            <li class="alert-item">ğŸ“Œ Si tus ventas superan Q150,000 â†’ RÃ©gimen General.</li>
            <li class="alert-item">ğŸ“Œ Si quieres emitir facturas con crÃ©dito fiscal â†’ General.</li>
            <li class="alert-item">ğŸ“Œ Para pequeÃ±os negocios â†’ PequeÃ±o Contribuyente.</li>
          </ul>
        </article>
      </section>

      <!-- IntegraciÃ³n DTE -->
      <section class="card">
        <h2 class="card-title">IntegraciÃ³n DTE (PrÃ³ximamente)</h2>
        <p class="card-description">
          En una versiÃ³n futura, ALEX 3.0 podrÃ¡ conectarse directamente con SAT para emitir:
        </p>

        <ul class="alerts-list">
          <li class="alert-item">ğŸ“„ Factura electrÃ³nica FEL</li>
          <li class="alert-item">ğŸ“„ Recibos</li>
          <li class="alert-item">ğŸ“„ Notas de crÃ©dito</li>
          <li class="alert-item">ğŸ“„ Facturas especiales</li>
        </ul>

        <button class="btn btn-primary" disabled>
          Conectar con SAT (PrÃ³ximamente)
        </button>
      </section>

      <!-- Explicador IA -->
      <section class="card">
        <h2 class="card-title">Explicador de impuestos (IA)</h2>
        <p class="card-description">
          En la versiÃ³n avanzada podrÃ¡s escribir aquÃ­ preguntas como:
        </p>

        <ul class="alerts-list">
          <li class="alert-item">â“ Â¿QuÃ© impuesto debo pagar este mes?</li>
          <li class="alert-item">â“ Â¿CuÃ¡nto debo pagar si vendÃ­ Q8,000?</li>
          <li class="alert-item">â“ Â¿QuÃ© beneficios tengo en rÃ©gimen pequeÃ±o contribuyente?</li>
        </ul>

        <div class="form-grid">
          <input type="text" class="input" disabled placeholder="Escribe tu pregunta aquÃ­ (PrÃ³ximamente)">
        </div>
      </section>

      <!-- Advertencias -->
      <section class="card">
        <h2 class="card-title">Advertencias comunes de SAT</h2>
        <ul class="alerts-list">
          <li class="alert-item">âš ï¸ Multas por no declarar a tiempo.</li>
          <li class="alert-item">âš ï¸ Cierre temporal del negocio por incumplimiento.</li>
          <li class="alert-item">âš ï¸ Bloqueo de NIT.</li>
          <li class="alert-item">âš ï¸ Problemas para emitir facturas.</li>
        </ul>
        <p class="card-description">
          ALEX 3.0 te alertarÃ¡ cuando falte poco para tu declaraciÃ³n mensual o trimestral.
        </p>
      </section>

    </main>
  </div>

  <!-- Scripts -->
  <script src="alex-storage.js"></script>
  <script src="alex-roles.js"></script>

  <script>
    // MenÃº mÃ³vil
    const btnMenuMobile = document.getElementById('btnMenuMobile');
    const sidebar = document.querySelector('.sidebar');
    btnMenuMobile.addEventListener('click', () => {
      sidebar.classList.toggle('sidebar-open');
    });

    // Usuario actual
    const usuario = getUsuarioActualObligatorio();
    const labelUser = document.getElementById("topbar-user-label");

    if (usuario && labelUser) {
      const rolTexto = usuario.rol === "dueno" ? "DueÃ±o" : "Empleado";
      labelUser.textContent = `${usuario.nombre} (${rolTexto})`;
    }

    aplicarPermisosYProteger("sat");

    // Cerrar sesiÃ³n
    document.getElementById("btnLogout").onclick = () => {
      if (!confirm("Â¿Deseas cerrar sesiÃ³n?")) return;
      save("usuarioActual", null);
      window.location.href = "index.html";
    };
  </script>
</body>
</html>
