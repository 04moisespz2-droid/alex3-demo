<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ConfiguraciÃ³n - ALEX 3.0</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="dashboard-body">

  <!-- Sidebar (mismo estilo que tus otras pÃ¡ginas) -->
  <div class="sidebar">
    <h2 class="logo">ALEX 3.0</h2>
    <ul class="menu">
      <li><a href="dashboard.html">ğŸ  Inicio</a></li>
      <li><a href="inventario.html">ğŸ“¦ Inventario</a></li>
      <li><a href="ventas.html">ğŸ’µ Ventas</a></li>
      <li><a href="caja.html">ğŸ’° Caja</a></li>
      <li><a href="usuarios.html">ğŸ‘¤ Usuarios</a></li>
      <li><a href="reportes.html">ğŸ“Š Reportes</a></li>
      <li class="active"><a href="configuracion.html">âš™ï¸ ConfiguraciÃ³n</a></li>
    </ul>
  </div>

  <div class="main-content">
    <h1>âš™ï¸ ConfiguraciÃ³n de ALEX 3.0</h1>
    <p>AquÃ­ puedes administrar opciones avanzadas del sistema.</p>

    <!-- BLOQUE: Conversor de monedas -->
    <div style="margin-top: 20px; padding: 16px; border-radius: 8px; background:#151515; border:1px solid #333;">
      <h2>ğŸ’± Conversor de monedas (LatinoamÃ©rica)</h2>
      <p style="font-size: 0.9rem; color:#ccc;">
        Tasas de ejemplo, puedes ajustarlas segÃºn el dÃ­a. ConversiÃ³n interna, sin conexiÃ³n a internet.
      </p>

      <!-- Formulario de conversiÃ³n -->
      <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; align-items:center;">
        <div>
          <label for="monedaOrigen">Moneda origen:</label><br />
          <select id="monedaOrigen"></select>
        </div>
        <div>
          <label for="monedaDestino">Moneda destino:</label><br />
          <select id="monedaDestino"></select>
        </div>
        <div>
          <label for="montoOrigen">Monto:</label><br />
          <input id="montoOrigen" type="number" step="0.01" placeholder="Ej: 100" />
        </div>
        <div style="align-self:flex-end;">
          <button onclick="convertirMoneda()" style="padding:8px 14px;">Convertir</button>
        </div>
      </div>

      <p id="resultadoConversion" style="margin-top:12px; font-weight:bold;"></p>

      <hr style="margin:18px 0; border-color:#333;" />

      <!-- Tabla de tasas -->
      <h3>âœï¸ Editar tasas de cambio (1 USD = ...)</h3>
      <p style="font-size: 0.9rem; color:#ccc;">
        AquÃ­ defines cuÃ¡ntas unidades de cada moneda equivalen a <b>1 dÃ³lar (USD)</b>.
        Ejemplo: si 1 USD â‰ˆ 7.8 GTQ, escribe 7.8 en Quetzal.
      </p>

      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px; margin-top:10px;">
        <div>
          <label for="tasa_USD">USD (DÃ³lar USA):</label>
          <input id="tasa_USD" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_GTD">GTQ (Quetzal):</label>
          <input id="tasa_GTQ" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_MXN">MXN (Peso mexicano):</label>
          <input id="tasa_MXN" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_COP">COP (Peso colombiano):</label>
          <input id="tasa_COP" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_BRL">BRL (Real brasileÃ±o):</label>
          <input id="tasa_BRL" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_CLP">CLP (Peso chileno):</label>
          <input id="tasa_CLP" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_PEN">PEN (Sol peruano):</label>
          <input id="tasa_PEN" type="number" step="0.0001" />
        </div>
        <div>
          <label for="tasa_ARS">ARS (Peso argentino):</label>
          <input id="tasa_ARS" type="number" step="0.0001" />
        </div>
      </div>

      <button onclick="guardarTasasMoneda()" style="margin-top:12px; padding:8px 14px;">
        ğŸ’¾ Guardar tasas
      </button>
      <p id="mensajeTasas" style="margin-top:6px; font-size:0.9rem; color:#9f9;">
      </p>
    </div>

    <p style="margin-top:24px; font-size:0.85rem; color:#777;">
      ALEX 3.0 â€“ MÃ³dulo de configuraciÃ³n con conversor de monedas (demo local sin conexiÃ³n a bancos).
    </p>
  </div>

  <script>
    // ==========================
    // T A S A S   D E   C A M B I O
    // Base: 1 USD = X moneda
    // Se guardan en localStorage: alex3_tasas
    // ==========================

    const MONEDAS = [
      { codigo: "USD", nombre: "USD â€“ DÃ³lar USA" },
      { codigo: "GTQ", nombre: "GTQ â€“ Quetzal (Guatemala)" },
      { codigo: "MXN", nombre: "MXN â€“ Peso mexicano" },
      { codigo: "COP", nombre: "COP â€“ Peso colombiano" },
      { codigo: "BRL", nombre: "BRL â€“ Real brasileÃ±o" },
      { codigo: "CLP", nombre: "CLP â€“ Peso chileno" },
      { codigo: "PEN", nombre: "PEN â€“ Sol peruano" },
      { codigo: "ARS", nombre: "ARS â€“ Peso argentino" }
    ];

    // Tasas de ejemplo, tÃº las puedes ajustar en la interfaz.
    const TASAS_POR_DEFECTO = {
      USD: 1,      // 1 USD = 1 USD
      GTQ: 7.8,    // ejemplo: 1 USD â‰ˆ 7.8 quetzales
      MXN: 17.0,   // ejemplo
      COP: 4000,   // ejemplo
      BRL: 5.5,    // ejemplo
      CLP: 950,    // ejemplo
      PEN: 3.8,    // ejemplo
      ARS: 900     // ejemplo
    };

    function cargarTasas() {
      try {
        const guardadas = localStorage.getItem("alex3_tasas");
        if (guardadas) {
          return JSON.parse(guardadas);
        }
      } catch (e) {
        console.error("Error leyendo tasas guardadas:", e);
      }
      return { ...TASAS_POR_DEFECTO };
    }

    function guardarTasas(tasas) {
      localStorage.setItem("alex3_tasas", JSON.stringify(tasas));
    }

    let tasas = cargarTasas();

    function llenarSelectMonedas() {
      const selOrigen = document.getElementById("monedaOrigen");
      const selDestino = document.getElementById("monedaDestino");
      selOrigen.innerHTML = "";
      selDestino.innerHTML = "";

      MONEDAS.forEach(m => {
        const opt1 = document.createElement("option");
        opt1.value = m.codigo;
        opt1.textContent = m.nombre;
        selOrigen.appendChild(opt1);

        const opt2 = document.createElement("option");
        opt2.value = m.codigo;
        opt2.textContent = m.nombre;
        selDestino.appendChild(opt2);
      });

      selOrigen.value = "GTQ"; // origen por defecto
      selDestino.value = "USD"; // destino por defecto
    }

    function llenarInputsTasas() {
      // Si falta alguna porque el usuario borrÃ³, rellenamos con defecto
      MONEDAS.forEach(m => {
        if (typeof tasas[m.codigo] !== "number" || isNaN(tasas[m.codigo])) {
          tasas[m.codigo] = TASAS_POR_DEFECTO[m.codigo] || 1;
        }
      });

      document.getElementById("tasa_USD").value = tasas.USD;
      document.getElementById("tasa_GTQ").value = tasas.GTQ;
      document.getElementById("tasa_MXN").value = tasas.MXN;
      document.getElementById("tasa_COP").value = tasas.COP;
      document.getElementById("tasa_BRL").value = tasas.BRL;
      document.getElementById("tasa_CLP").value = tasas.CLP;
      document.getElementById("tasa_PEN").value = tasas.PEN;
      document.getElementById("tasa_ARS").value = tasas.ARS;
    }

    function guardarTasasMoneda() {
      tasas.USD = parseFloat(document.getElementById("tasa_USD").value) || 1;
      tasas.GTQ = parseFloat(document.getElementById("tasa_GTQ").value) || TASAS_POR_DEFECTO.GTQ;
      tasas.MXN = parseFloat(document.getElementById("tasa_MXN").value) || TASAS_POR_DEFECTO.MXN;
      tasas.COP = parseFloat(document.getElementById("tasa_COP").value) || TASAS_POR_DEFECTO.COP;
      tasas.BRL = parseFloat(document.getElementById("tasa_BRL").value) || TASAS_POR_DEFECTO.BRL;
      tasas.CLP = parseFloat(document.getElementById("tasa_CLP").value) || TASAS_POR_DEFECTO.CLP;
      tasas.PEN = parseFloat(document.getElementById("tasa_PEN").value) || TASAS_POR_DEFECTO.PEN;
      tasas.ARS = parseFloat(document.getElementById("tasa_ARS").value) || TASAS_POR_DEFECTO.ARS;

      guardarTasas(tasas);
      const msg = document.getElementById("mensajeTasas");
      msg.textContent = "âœ… Tasas guardadas. Recuerda que son aproximadas y puedes cambiarlas cuando quieras.";
      setTimeout(() => { msg.textContent = ""; }, 4000);
    }

    function convertirMoneda() {
      const origen = document.getElementById("monedaOrigen").value;
      const destino = document.getElementById("monedaDestino").value;
      const monto = parseFloat(document.getElementById("montoOrigen").value);

      const salida = document.getElementById("resultadoConversion");

      if (!origen || !destino || isNaN(monto) || monto <= 0) {
        salida.textContent = "Ingresa un monto vÃ¡lido y selecciona ambas monedas.";
        salida.style.color = "#ff8080";
        return;
      }

      // Paso 1: llevar todo a USD
      const tasaOrigen = tasas[origen];
      const tasaDestino = tasas[destino];

      if (!tasaOrigen || !tasaDestino) {
        salida.textContent = "Faltan tasas de cambio. Revisa la tabla de abajo.";
        salida.style.color = "#ff8080";
        return;
      }

      // Si tasa[X] = cuÃ¡ntas unidades de X son 1 USD:
      // 1 USD = tasa[X] X
      // => 1 X = 1 / tasa[X] USD
      const montoEnUSD = monto / tasaOrigen;
      const montoDestino = montoEnUSD * tasaDestino;

      salida.textContent = `${monto.toFixed(2)} ${origen} â‰ˆ ${montoDestino.toFixed(2)} ${destino}`;
      salida.style.color = "#9ff59f";
    }

    // Inicializar al cargar la pÃ¡gina
    llenarSelectMonedas();
    llenarInputsTasas();
  </script>

</body>
</html>
